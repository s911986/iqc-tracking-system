<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IQC Retest & FA Tracking</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
  <div class="container">
    <h1 class="app-title">IQC Retest & FA Tracking</h1>

    <form id="retest-form" class="form-card" novalidate>
      <div class="form-grid">
        <div class="form-row">
          <label for="qpn">QPN <span class="required">*</span></label>
          <input id="qpn" class="input" placeholder="例如: BJ000000001" />
          <div class="field-error" id="error-qpn"></div>
        </div>

        <div class="form-row">
          <label for="sn">SN <span class="required">*</span></label>
          <input id="sn" class="input" placeholder="例如: DK3XXXXXXXX00XXX" />
          <div class="field-error" id="error-sn"></div>
        </div>

        <div class="form-row">
          <label for="dept">部門 <span class="required">*</span></label>
          <select id="dept" class="input">
            <option value="">-- 選擇 --</option>
            <option value="PE">PE</option>
            <option value="NPI">NPI</option>
            <option value="RD">RD</option>
            <option value="QA">QA</option>
          </select>
          <div class="field-error" id="error-dept"></div>
        </div>

        <div class="form-row">
          <label for="requester">Requester</label>
          <input id="requester" class="input" placeholder="填寫申請人" />
        </div>

        <div class="form-row">
          <label for="verifier">Verifier</label>
          <input id="verifier" class="input" placeholder="填寫驗證人" />
        </div>

        <div class="form-row">
          <label for="result-select">Result</label>
          <select id="result-select" name="result" class="input">
            <option value="Pass">Pass</option>
            <option value="Fail">Fail</option>
          </select>
        </div>
      </div>

      <!-- FAIL NOTE (optional) -->
      <div id="fail-info-section" class="form-row section-card" style="display:none;">
        <label for="fail-note">Fail 備註（選填）</label>
        <textarea id="fail-note" rows="3" placeholder="描述 fail 的情況（選填）" class="input"></textarea>
        <div class="field-info">如果欄位留空，紀錄仍會儲存。</div>
      </div>

      <!-- PARTS (optional dynamic list) -->
      <div id="parts-section" class="form-row section-card">
        <label>Parts（選填）</label>
        <div id="parts-list" style="margin-bottom:8px;"></div>
        <div class="parts-actions">
          <button type="button" id="add-part-btn" class="btn">＋ 新增 Part</button>
          <div class="field-info">若不需備件，請留空。每筆 Part 需有 Part No 才會被儲存。</div>
        </div>
        <div class="field-error" id="error-parts"></div>
      </div>

      <div class="form-actions">
        <button id="save-btn" type="button" class="btn-primary">儲存</button>
        <button id="reset-btn" type="button" class="btn-secondary">重設</button>
      </div>
    </form>

    <!-- table and other UI -->
    <section id="records-section" class="section-card">
      <div class="section-header">
        <h2>Records</h2>
        <div class="section-tools">
          <button id="create-rtv-group-from-selection" class="btn" disabled>建立 RTV 群組（選取）</button>
        </div>
      </div>
      <div id="records-table" class="records-table-wrapper"></div>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>
